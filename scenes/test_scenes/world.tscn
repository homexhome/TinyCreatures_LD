[gd_scene load_steps=48 format=3 uid="uid://dvpglwl63g1gk"]

[ext_resource type="Script" path="res://scripts/test_scripts/test_target.gd" id="1_gq3bx"]
[ext_resource type="Script" path="res://scenes/test_scenes/ui.gd" id="2_w5nye"]
[ext_resource type="PackedScene" uid="uid://bimlqd0cjgbeh" path="res://scenes/test_scenes/Skeleton.tscn" id="3_i11hk"]
[ext_resource type="Theme" uid="uid://bgyun6who488h" path="res://themes/ui_3d_theme.tres" id="4_nnfht"]
[ext_resource type="Script" path="res://scenes/test_scenes/texture_rect.gd" id="5_4ld7p"]
[ext_resource type="Script" path="res://scenes/test_scenes/camera_3d.gd" id="8_gp0kg"]
[ext_resource type="PackedScene" path="res://scenes/test_scenes/level_scene.tscn" id="9_o0rq1"]
[ext_resource type="PackedScene" uid="uid://dkniwytykfpbr" path="res://scenes/test_scenes/nav_mesh.tscn" id="10_p8nci"]
[ext_resource type="Script" path="res://scripts/navigation/navigation_marks.gd" id="11_te3fi"]
[ext_resource type="Texture2D" uid="uid://bdu7742reuh3d" path="res://parallax/кристаллы.png" id="12_fidbp"]
[ext_resource type="Texture2D" uid="uid://dtp5dhtyxy68j" path="res://parallax/2.png" id="12_o7nie"]
[ext_resource type="Texture2D" uid="uid://daintnoik23qw" path="res://parallax/1.png" id="13_abg1y"]
[ext_resource type="Texture2D" uid="uid://dvtabbs4t8lhb" path="res://parallax/9.png" id="13_id7hc"]
[ext_resource type="Texture2D" uid="uid://b6ry085rrwhge" path="res://parallax/8.png" id="14_jijr3"]
[ext_resource type="Texture2D" uid="uid://dkmkrsvavbmo" path="res://parallax/7.png" id="15_ji2e0"]
[ext_resource type="Texture2D" uid="uid://df4sdhith7ho7" path="res://parallax/6.png" id="16_mw4bo"]
[ext_resource type="Texture2D" uid="uid://dsp1lwknb5s43" path="res://parallax/5.png" id="17_nqkna"]
[ext_resource type="Texture2D" uid="uid://c7jhfh3bmm3om" path="res://parallax/4.png" id="19_47lxb"]
[ext_resource type="Texture2D" uid="uid://cacb8ihpllrvm" path="res://parallax/3.png" id="20_qr5ac"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_t1s38"]
transparency = 1
albedo_color = Color(1, 0, 0, 0.290196)

[sub_resource type="SphereMesh" id="SphereMesh_hrlki"]
material = SubResource("StandardMaterial3D_t1s38")
radius = 0.15
height = 0.32

[sub_resource type="Environment" id="Environment_l0yfs"]
background_mode = 1
background_color = Color(0.8, 0.423529, 0.847059, 1)
background_energy_multiplier = 0.7
ambient_light_source = 2
ambient_light_color = Color(0.8, 0.423529, 0.847059, 1)
ssao_radius = 3.52
ssao_intensity = 3.35
fog_enabled = true
fog_mode = 1
fog_density = 0.482

[sub_resource type="ViewportTexture" id="ViewportTexture_vmhh0"]
viewport_path = NodePath("UI/SubViewport")

[sub_resource type="Curve3D" id="Curve3D_sv3w4"]
bake_interval = 125.2
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 6.03188, -0.31185, 0, 0, 0, 0, 0, 0, 0, 6.53899, -2.7876, 0, 0, 0, 0, 0, 0, 0, 5.90252, -6.42808, 0, 0, 0, 0, 0, 0, 0, 4.47009, -8.71872),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="Curve3D" id="Curve3D_fdc0o"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.16724, 2.17833, -0.600537, 0, 0, 0, 0, 0, 0, -3.4575, 2.36167, 2.39692, 0, 0, 0, 0, 0, 0, -1.85055, 0.746642, 3.68846, 0, 0, 0, 0, 0, 0, -0.311726, -0.735074, 4.23023, 0, 0, 0, 0, 0, 0, 3.75865, -0.753003, 4.25281, 0, 0, 0, 0, 0, 0, 6.7158, 0.779896, 4.11736, 0, 0, 0, 0, 0, 0, 9.62781, 0.833682, 4.11736, 0, 0, 0, 0, 0, 0, 11.61, 0.855866, 4.09997, 0, 0, 0, 0, 0, 0, 13.5669, -0.921886, 4.07241, 0, 0, 0, 0, 0, 0, 17.0658, -0.92378, 3.8241, 0, 0, 0, 0, 0, 0, 20.3842, -0.867736, 3.59836, 0, 0, 0, 0, 0, 0, 23.251, -0.713007, 3.32921, 0, 0, 0, 0, 0, 0, 25.689, -0.90441, 2.49202, 0, 0, 0, 0, 0, 0, 28.2435, -0.741809, 0.830958),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 14

[sub_resource type="Curve3D" id="Curve3D_860qd"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -5.48858, 0, -1.8591, 0, 0, 0, 0, 0, 0, -4.35056, 0, -3.70838, 0, 0, 0, 0, 0, 0, -3.14141, 0, -5.35851, 0, 0, 0, 0, 0, 0, -1.47706, 0, -5.95597, 0, 0, 0, 0, 0, 0, -0.0687585, 0, -6.084, 0, 0, 0, 0, 0, 0, 1.78419, 0.0188732, -5.836, 0, 0, 0, 0, 0, 0, 3.37742, 0, -5.54432, 0, 0, 0, 0, 0, 0, 5.37122, -0.074388, -5.60907, 0, 0, 0, 0, 0, 0, 7.99707, -1.52627, -5.84305, 0, 0, 0, 0, 0, 0, 11.059, -1.47897, -5.81471, 0, 0, 0, 0, 0, 0, 12.33, -0.28235, -6.24147, 0, 0, 0, 0, 0, 0, 14.0657, 0, -6.35527, 0, 0, 0, 0, 0, 0, 17.4275, 0, -6.34127, 0, 0, 0, 0, 0, 0, 20.1587, 0, -6.34127, 0, 0, 0, 0, 0, 0, 21.5969, 0, -6.09421, 0, 0, 0, 0, 0, 0, 24.7819, -1.68064, -4.2786, 0, 0, 0, 0, 0, 0, 27.2002, -2.92695, -2.61425, 0, 0, 0, 0, 0, 0, 28.101, -2.90818, -1.84476),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 18

[sub_resource type="Curve3D" id="Curve3D_asxpc"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -5.46584, 2.32095, -1.58594, 0, 0, 0, 0, 0, 0, -2.83635, 2.24153, -1.60016, 0, 0, 0, 0, 0, 0, -0.841417, 0.773253, -1.60016, 0, 0, 0, 0, 0, 0, 2.91284, 0.891313, -1.40101, 0, 0, 0, 0, 0, 0, 5.47338, 0.985983, -1.04538, 0, 0, 0, 0, 0, 0, 8.23791, 1.07824, -1.01649, 0, 0, 0, 0, 0, 0, 10.6989, 1.08168, -0.390576, 0, 0, 0, 0, 0, 0, 13.2879, 1.13995, -0.162972, 0, 0, 0, 0, 0, 0, 15.612, 1.06006, -0.134378, 0, 0, 0, 0, 0, 0, 17.6605, 1.0601, -0.148603, 0, 0, 0, 0, 0, 0, 19.9649, 1.0695, -0.148603, 0, 0, 0, 0, 0, 0, 22.0243, 1.0463, -0.205453, 0, 0, 0, 0, 0, 0, 25.0369, -0.599274, -0.546859, 0, 0, 0, 0, 0, 0, 27.2813, -0.764446, -0.433057),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 14

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kosd3"]
transparency = 1
shading_mode = 2
disable_ambient_light = true
albedo_texture = ExtResource("12_fidbp")
metallic_specular = 0.0
roughness = 0.0

[sub_resource type="QuadMesh" id="QuadMesh_5l2fy"]
material = SubResource("StandardMaterial3D_kosd3")
size = Vector2(5000, 1000)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g20qa"]
transparency = 1
albedo_texture = ExtResource("13_id7hc")

[sub_resource type="QuadMesh" id="QuadMesh_7ta8b"]
material = SubResource("StandardMaterial3D_g20qa")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2543b"]
transparency = 1
albedo_texture = ExtResource("14_jijr3")

[sub_resource type="QuadMesh" id="QuadMesh_wnh86"]
material = SubResource("StandardMaterial3D_2543b")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nn53j"]
transparency = 1
albedo_texture = ExtResource("15_ji2e0")

[sub_resource type="QuadMesh" id="QuadMesh_wuxfk"]
material = SubResource("StandardMaterial3D_nn53j")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_defbk"]
transparency = 1
albedo_texture = ExtResource("16_mw4bo")

[sub_resource type="QuadMesh" id="QuadMesh_pomx8"]
material = SubResource("StandardMaterial3D_defbk")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_awnbg"]
albedo_texture = ExtResource("17_nqkna")

[sub_resource type="QuadMesh" id="QuadMesh_hul7l"]
material = SubResource("StandardMaterial3D_awnbg")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tqakr"]
albedo_texture = ExtResource("13_abg1y")

[sub_resource type="QuadMesh" id="QuadMesh_omvqn"]
material = SubResource("StandardMaterial3D_tqakr")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bc7cv"]
transparency = 1
albedo_texture = ExtResource("19_47lxb")

[sub_resource type="QuadMesh" id="QuadMesh_b3y15"]
material = SubResource("StandardMaterial3D_bc7cv")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4f3sm"]
transparency = 1
albedo_texture = ExtResource("20_qr5ac")

[sub_resource type="QuadMesh" id="QuadMesh_0ditu"]
material = SubResource("StandardMaterial3D_4f3sm")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1d4xj"]
transparency = 1
albedo_texture = ExtResource("12_o7nie")

[sub_resource type="QuadMesh" id="QuadMesh_cpxrg"]
material = SubResource("StandardMaterial3D_1d4xj")

[node name="test_world" type="Node3D"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="." node_paths=PackedStringArray("mesh_to_take", "camera", "ui")]
mesh = SubResource("SphereMesh_hrlki")
script = ExtResource("1_gq3bx")
mesh_to_take = NodePath(".")
camera = NodePath("../Path3D/PathFollow3D/Camera3D")
ui = NodePath("../UI")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.952023, -1.33769e-08, 0.306028, -0.288856, 0.330267, 0.898602, -0.101071, -0.943887, 0.314422, -0.333963, 1.80632, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_l0yfs")

[node name="UI" type="Control" parent="." node_paths=PackedStringArray("place_to_load")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_w5nye")
place_to_load = NodePath("../Mobs")

[node name="SubViewport" type="SubViewport" parent="UI"]
own_world_3d = true
transparent_bg = true
size = Vector2i(138, 150)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="UI/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.329, 0, 0.971)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="UI/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.1992, 0, 3.66713)
visible = false

[node name="Scene" parent="UI/SubViewport" instance=ExtResource("3_i11hk")]
transform = Transform3D(-0.59238, 0.129154, -0.795239, 0.214181, 0.976793, -0.000905187, 0.776667, -0.170862, -0.606296, -12.3904, -0.404044, 0.30842)

[node name="ScrollContainer" type="ScrollContainer" parent="UI"]
clip_contents = false
custom_minimum_size = Vector2(150, 0)
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -154.0
grow_horizontal = 0
grow_vertical = 2
horizontal_scroll_mode = 0

[node name="VBoxContainer" type="VBoxContainer" parent="UI/ScrollContainer"]
layout_mode = 2
alignment = 1

[node name="Button" type="Button" parent="UI/ScrollContainer/VBoxContainer" node_paths=PackedStringArray("ui")]
custom_minimum_size = Vector2(150, 150)
layout_mode = 2
theme = ExtResource("4_nnfht")
icon = SubResource("ViewportTexture_vmhh0")
script = ExtResource("5_4ld7p")
mesh_to_inst = ExtResource("3_i11hk")
ui = NodePath("../../..")

[node name="Mobs" type="Node3D" parent="."]

[node name="Path3D" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.988228, -0.152986, 0, 0.152986, 0.988228, 0, 4.60876, 7.98048)
curve = SubResource("Curve3D_sv3w4")

[node name="PathFollow3D" type="PathFollow3D" parent="Path3D"]
transform = Transform3D(1, 0, 0, 0, 0.979652, -0.200663, 0, 0.200663, 0.979652, 0, 6.03188, -0.31185)
loop = false

[node name="Camera3D" type="Camera3D" parent="Path3D/PathFollow3D" node_paths=PackedStringArray("path_follow", "path")]
transform = Transform3D(1, 0, 0, 0, 0.555457, 0.831555, 0, -0.831555, 0.555457, 0, 0, 0)
current = true
fov = 75.1
size = 8.001
script = ExtResource("8_gp0kg")
max_x = 35.0
min_x = 0.0
path_follow = NodePath("..")
path = NodePath("../..")

[node name="LevelScene" parent="." instance=ExtResource("9_o0rq1")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0, 0)

[node name="NavMesh" parent="LevelScene" groups=["navigation_mesh_source_group"] instance=ExtResource("10_p8nci")]
visible = false

[node name="NavigationMarks" type="Node3D" parent="." node_paths=PackedStringArray("paths_array") groups=["NavigationMarks"]]
script = ExtResource("11_te3fi")
paths_array = [NodePath("Path3D"), NodePath("Path3D2"), NodePath("Path3D3")]

[node name="Path3D" type="Path3D" parent="NavigationMarks"]
curve = SubResource("Curve3D_fdc0o")

[node name="Path3D2" type="Path3D" parent="NavigationMarks"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.27781, 0)
curve = SubResource("Curve3D_860qd")

[node name="Path3D3" type="Path3D" parent="NavigationMarks"]
curve = SubResource("Curve3D_asxpc")

[node name="Node" type="Node" parent="."]

[node name="Background" type="MeshInstance3D" parent="Node"]
transform = Transform3D(0.0102097, 0, 0, 0, 0.0215295, 0, 0, 0, 0.0181764, 16.6037, 0.650646, -14.1539)
mesh = SubResource("QuadMesh_5l2fy")
skeleton = NodePath("../..")

[node name="BG2" type="MeshInstance3D" parent="Node"]
transform = Transform3D(34.1838, 0, 0, 0, 14.3937, 0, 0, 0, 5.14087, 20.0157, 4.78243, -13.6461)
mesh = SubResource("QuadMesh_7ta8b")
skeleton = NodePath("../..")

[node name="BG3" type="MeshInstance3D" parent="Node"]
transform = Transform3D(56.6381, 0, 0, 0, 34.2777, 0, 0, 0, 20.963, 16.6037, 12.3767, -23.6891)
mesh = SubResource("QuadMesh_wnh86")
skeleton = NodePath("../BG4")

[node name="BG4" type="MeshInstance3D" parent="Node"]
transform = Transform3D(24.9661, 0, 0, 0, 24.9661, 0, 0, 0, 24.9661, 8.3366, 7.36029, -14.3636)
mesh = SubResource("QuadMesh_wuxfk")
skeleton = NodePath("../BG5")

[node name="BG5" type="MeshInstance3D" parent="Node"]
transform = Transform3D(43.9661, 0, 0, 0, 29.9567, 0, 0, 0, 29.9567, 6.66311, 5.11793, -22.7623)
mesh = SubResource("QuadMesh_pomx8")
skeleton = NodePath("../BG6")

[node name="BG6" type="MeshInstance3D" parent="Node"]
transform = Transform3D(88.441, 0, 0, 0, 34.051, 0, 0, 0, 34.051, 16.6037, 3.08265, -32.0985)
mesh = SubResource("QuadMesh_hul7l")
skeleton = NodePath("../MeshInstance3D5")

[node name="BG7" type="MeshInstance3D" parent="Node"]
transform = Transform3D(-59.3267, -0.271267, -0.0439394, 0.436975, -6.33526, 1.32327, -2.25161, 5.918, 1.41455, 16.6037, -2.86335, -10.9901)
mesh = SubResource("QuadMesh_omvqn")
skeleton = NodePath("../..")

[node name="BG8" type="MeshInstance3D" parent="Node"]
transform = Transform3D(24.461, 0, 0, 0, 29.2054, 0, 0, 0, 33.5715, 19.9952, 7.92947, -16.291)
mesh = SubResource("QuadMesh_b3y15")
skeleton = NodePath("../Background")

[node name="BG9" type="MeshInstance3D" parent="Node"]
transform = Transform3D(20.9811, 0, 0, 0, 20.9811, 0, 0, 0, 20.9811, 11.4297, 3.08265, -25.9671)
mesh = SubResource("QuadMesh_0ditu")
skeleton = NodePath("../Background")

[node name="BG10" type="MeshInstance3D" parent="Node"]
transform = Transform3D(102.317, 0, 0, 0, 26.1166, 0, 0, 0, 26.1166, 16.6037, 1.29366, -21.1584)
mesh = SubResource("QuadMesh_cpxrg")
skeleton = NodePath("../Background")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="Node"]
transform = Transform3D(0.0102097, 0, 0, 0, 0.0168688, 0, 0, 0, 0.0181764, 16.6037, 4.36078, -13.9739)
visible = false
skeleton = NodePath("../Background")
